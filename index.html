<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Telos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<div id="splash">
  <div class="splash-logo">
    <div class="splash-logo-icon">T</div>
    <div class="splash-logo-text">TELOS</div>
    <div class="splash-logo-sub">Connecting</div>
  </div>
</div>

<div id="app-main" class="app-main">

  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="brand-logo">T</div>
        <div class="brand-name">Telos</div>
      </div>

      <div class="search-bar">
        <input type="text" placeholder="搜尋…" />
        <button>Go</button>
      </div>

      <div class="topbar-right">
        <div class="account-actions">
          <button id="btn-login">登入</button>
          <button id="btn-logout" class="hidden">登出</button>
          <button id="btn-edit-profile" class="hidden">個人資料</button>
        </div>

        <button id="tools-button" class="tools-button">
          <div class="tools-dot-row">
            <div class="tools-dot"></div><div class="tools-dot"></div><div class="tools-dot"></div>
          </div>
          <div class="tools-dot-row offset">
            <div class="tools-dot"></div><div class="tools-dot"></div><div class="tools-dot"></div>
          </div>
        </button>
      </div>
    </div>
  </header>

  <div class="page">
    <div id="user-status" class="card sub">載入中...</div>
  </div>

</div>

<!-- Auth Modal -->
<div class="modal-backdrop hidden" id="auth-modal-backdrop">
  <div class="modal" id="auth-modal">
    <button class="modal-close" id="auth-modal-close">✕</button>
    <h2 id="auth-modal-title">登入 Telos</h2>

    <form id="auth-form">
      <label class="field">
        <span>Email</span>
        <input type="email" id="auth-email" required />
      </label>

      <label class="field">
        <span>密碼</span>
        <input type="password" id="auth-password" required />
      </label>

      <div id="signup-extra" class="hidden">
        <label class="field">
          <span>暱稱</span>
          <input type="text" id="auth-display-name" />
        </label>
      </div>

      <button id="auth-submit" type="submit">登入</button>

      <div class="auth-error" id="auth-error"></div>

      <div class="modal-switch">
        <span id="auth-switch-to-login">已有帳號？登入</span>
        <span id="auth-switch-to-signup">沒有帳號？註冊</span>
      </div>
    </form>
  </div>
</div>

<!-- Profile Modal -->
<div class="modal-backdrop hidden" id="profile-modal-backdrop">
  <div class="modal profile-modal" id="profile-modal">
    <button class="modal-close" id="profile-modal-close">✕</button>
    <h2>個人資料</h2>

    <div class="field">
      <span>Telos ID</span>
      <span id="profile-userid">(登入後會產生)</span>
    </div>

    <form id="profile-form">
      <label class="field">
        <span>顯示名稱</span>
        <input id="profile-name" />
      </label>

      <label class="field">
        <span>性別</span>
        <select id="profile-gender">
          <option value="">不顯示</option>
          <option value="男">男</option>
          <option value="女">女</option>
        </select>
      </label>

      <label class="field">
        <span>頭貼</span>
        <input type="file" id="profile-avatar" />
        <img id="profile-avatar-preview" class="avatar-preview" />
      </label>

      <label class="field">
        <span>自我介紹</span>
        <textarea id="profile-bio"></textarea>
      </label>

      <button type="submit" id="profile-save-btn">儲存個人資料</button>
      <div id="profile-status" class="profile-status"></div>
    </form>

    <h3 class="friends-title">好友</h3>
    <label class="field">
      <span>Telos ID 或 Email</span>
      <input id="friend-email" />
    </label>
    <button id="friend-add-btn">加好友</button>
    <div id="friend-error" class="auth-error"></div>

    <ul id="friends-list" class="friends-list"></ul>
  </div>
</div>

<!-- Tools panel -->
<div id="tools-panel" class="tools-panel">
  <div class="tools-title">工具</div>
  <div class="tools-grid">
    <button class="tool-item" data-tool="account">
      <div class="tool-icon bubble">👤</div>
      <div class="tool-label">個人<br />資料</div>
    </button>

    <button class="tool-item" data-tool="chat">
      <div class="tool-icon bubble">💬</div>
      <div class="tool-label">聊天</div>
    </button>
  </div>
  <div class="tools-hint">點外面關閉</div>
</div>

<!-- Chat float -->
<div id="chat-float" class="chat-float">
  <div class="chat-header">
    <div id="chat-header-title">Telos 訊息</div>
    <div class="chat-header-actions">
      <button id="btn-new-chat">＋</button>
      <button id="chat-close">✕</button>
    </div>
  </div>
  <div class="chat-body">
    <div class="chat-sidebar">
      <div class="chat-sidebar-header">對話列表</div>
      <div id="chat-thread-list" class="chat-thread-list"></div>
    </div>
    <div class="chat-main">
      <div id="chat-main-empty" class="chat-main-empty">選擇或建立一個對話</div>
      <div id="chat-window" class="chat-window">
        <div id="chat-messages" class="chat-messages"></div>
        <form id="chat-form" class="chat-input-row">
          <input id="chat-input" placeholder="輸入訊息…" />
          <button type="submit">送出</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script type="module" src="./telos-main.js"></script>
</body>
</html>
